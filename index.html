<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta property="og:type" content="website">
<meta property="og:title" content="‚ùÑÔ∏è SMOKE KOSTA | –ó–∏–º–Ω–∏–π –ö–∞—Ç–∞–ª–æ–≥">
<meta property="og:description" content="–ü–µ—Ä–µ—Ö–æ–¥–∏ –≤ –Ω–∞—à –∫–∞—Ç–∞–ª–æ–≥ –∏–ª–∏ –∂–µ –ø—Ä–∞–π—Å-–ª–∏—Å—Ç‚¨áÔ∏è">
<meta property="og:url" content="https://smokekatalog.netlify.app">
<meta property="og:image" content="https://sun9-79.userapi.com/s/v1/ig2/T2WIyVLcsRTNc1YanYPeWNiE7p_JVFJPGGGeEzKMYndlk6iQQkU3t1Equr-cfd3ZhWLamkqYvEncYSB_c8VwzcbY.jpg?quality=95&as=32x17,48x25,72x38,108x57,160x84,240x126,360x189,480x252,540x283,640x336,720x378,1080x567,1200x630&from=bu&cs=1200x0">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="‚ùÑÔ∏è SMOKE KOSTA | –ó–∏–º–Ω–∏–π –ö–∞—Ç–∞–ª–æ–≥">
<meta name="twitter:description" content="–ü–µ—Ä–µ—Ö–æ–¥–∏ –≤ –Ω–∞—à –∫–∞—Ç–∞–ª–æ–≥ –∏–ª–∏ –∂–µ –ø—Ä–∞–π—Å-–ª–∏—Å—Ç‚¨áÔ∏è">
<meta name="twitter:image" content="https://sun9-79.userapi.com/s/v1/ig2/T2WIyVLcsRTNc1YanYPeWNiE7p_JVFJPGGGeEzKMYndlk6iQQkU3t1Equr-cfd3ZhWLamkqYvEncYSB_c8VwzcbY.jpg?quality=95&as=32x17,48x25,72x38,108x57,160x84,240x126,360x189,480x252,540x283,640x336,720x378,1080x567,1200x630&from=bu&cs=1200x0">

    <title>SMOKE KOSTA | –ó–∏–º–Ω–∏–π –ö–∞—Ç–∞–ª–æ–≥</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800;900&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="logot.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        :root {
            --blue-accent: #00d4ff;
            --promo-color: #ff00d4;
            --bg-main: #0b0f13;
            --card-bg: #161b22;
            --out-of-stock-color: rgba(255, 255, 255, 0.15);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        
        body { 
            background: var(--bg-main); 
            color: #fff; font-family: 'Montserrat', sans-serif;
            overflow-x: hidden; width: 100%;
        }

        #snow-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 5; overflow: hidden; }
        .snowflake { position: absolute; top: -20px; color: white; opacity: 0.2; pointer-events: none; }

        #hintBox {
            position: fixed; top: -150px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 400px; background: rgba(255, 255, 255, 0.07);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            padding: 18px; border-radius: 25px; border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 2000; display: flex; align-items: center; justify-content: space-between;
        }

        .container { width: 100%; max-width: 1200px; padding: 80px 15px 180px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 60px; }
        header h1 { font-size: clamp(3.5rem, 12vw, 5.5rem); font-weight: 900; color: var(--blue-accent); text-transform: uppercase; letter-spacing: -4px; line-height: 0.8; }

        #catalog-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(330px, 1fr)); gap: 30px; }

        .catalog-item {
            background: var(--card-bg); border-radius: 35px; padding: 70px 25px 35px;
            border: 1px solid rgba(255,255,255,0.03); position: relative;
            text-align: center; opacity: 0; transform: translateY(50px);
        }

        .promo-badge {
            position: absolute; top: -15px; left: 50%; transform: translateX(-50%);
            background: var(--promo-color); color: white; padding: 12px 28px;
            border-radius: 50px; font-weight: 900; font-size: 0.8rem;
            text-decoration: none; z-index: 10; white-space: nowrap;
        }

        .item-title { font-size: 2rem; font-weight: 900; margin-bottom: 5px; }
        .specs { color: var(--blue-accent); font-weight: 700; opacity: 0.5; margin-bottom: 20px; font-size: 0.85rem; }

        .price-box { margin-bottom: 25px; display: flex; flex-direction: column; align-items: center; }
        .old-price { font-size: 0.95rem; font-weight: 700; color: rgba(255,255,255,0.3); text-decoration: line-through; margin-bottom: 4px; }
        .price-tag { background: var(--blue-accent); color: #000; padding: 10px 30px; border-radius: 14px; font-weight: 900; font-size: 1.6rem; }

        .flavor-list { width: 100%; list-style: none; display: flex; flex-direction: column; gap: 10px; }
        
        /* –°–¢–ò–õ–¨ –î–õ–Ø –ö–ù–û–ü–û–ö –í–ö–£–°–ê */
        .flavor-list li {
            background: rgba(255,255,255,0.03); padding: 18px 20px; border-radius: 18px; 
            font-weight: 700; cursor: pointer; display: flex; justify-content: space-between; 
            border: 2px solid transparent; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* –ö–û–ì–î–ê –í–ö–£–° –í–´–ë–†–ê–ù */
        .flavor-list li.selected { border-color: var(--blue-accent); background: rgba(0, 212, 255, 0.1); color: var(--blue-accent); }

        /* –ö–û–ì–î–ê –í–ö–£–°–ê –ù–ï–¢ (–¢–û –ß–¢–û –¢–´ –ü–†–û–°–ò–õ) */
        .flavor-list li.out-of-stock {
            background: rgba(255, 255, 255, 0.01);
            color: var(--out-of-stock-color);
            border-color: transparent;
            text-decoration: line-through;
            cursor: not-allowed;
            pointer-events: none; /* –ß—Ç–æ–±—ã –Ω–µ–ª—å–∑—è –±—ã–ª–æ –∫–ª–∏–∫–Ω—É—Ç—å */
            filter: grayscale(1) blur(0.5px);
        }

        .order-btn {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(150px);
            width: 92%; max-width: 480px; background: var(--blue-accent);
            color: #000; padding: 22px 30px; border-radius: 30px;
            display: flex; justify-content: space-between; align-items: center;
            text-decoration: none; font-weight: 900; font-size: 1.1rem;
            z-index: 3000; opacity: 0;
        }

        .no-flavors { padding: 25px; color: #ffab00; font-weight: 800; border: 2px dashed rgba(255,171,0,0.2); border-radius: 25px; font-size: 0.9rem; }
    </style>
</head>
<body>

<div id="snow-container"></div>
<div id="hintBox">
    <p>üí° –ù–∞–∂–º–∏ –Ω–∞ –≤–∫—É—Å, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–∫–∞–∑!</p>
    <span onclick="hideHintManually()" style="cursor:pointer; font-weight:900; padding: 5px;">‚úï</span>
</div>

<div class="container">
    <header id="head-anim">
        <h1>SMOKE<br>KOSTA</h1>
    </header>
    <div id="catalog-container"></div>
</div>

<a href="#" id="orderBtn" class="order-btn">
    <span id="btnLabel">–í–´–ë–ï–†–ò–¢–ï –¢–û–í–ê–†</span>
    <span id="totalPrice" style="background: rgba(0,0,0,0.1); padding: 7px 15px; border-radius: 10px;">0 —Ç–≥</span>
</a>

<script>
    gsap.registerPlugin(ScrollTrigger);
    let cart = [];

    function hideHint() { gsap.to("#hintBox", { y: -200, opacity: 0, duration: 1, ease: "back.in(1.2)" }); }
    function hideHintManually() { hideHint(); }

    async function init() {
        try {
            const res = await fetch('products.json');
            const data = await res.json();
            render(data);
            
            gsap.from("#head-anim h1", { scale: 0.9, opacity: 0, duration: 1, ease: "power2.out" });

            const hintTl = gsap.timeline();
            hintTl.to("#hintBox", { top: "25px", duration: 1.2, ease: "elastic.out(1, 0.8)", delay: 1 })
                  .to("#hintBox", { y: -200, opacity: 0, duration: 1, ease: "back.in(1.2)", delay: 4 });

        } catch (e) { console.error(e); }
    }

    function render(products) {
        const root = document.getElementById('catalog-container');
        root.innerHTML = products.map((p, pIdx) => `
            <div class="catalog-item">
                ${p.promo ? `<a href="${p.promoLink}" class="promo-badge">${p.promo}</a>` : ''}
                <div class="item-title">${p.name}</div>
                <div class="specs">${p.specs}</div>
                <div class="price-box">
                    ${p.oldPrice ? `<div class="old-price">${p.oldPrice} —Ç–≥</div>` : ''}
                    <div class="price-tag">${p.price} —Ç–≥</div>
                </div>
                ${p.flavors.length > 0 ? `
                    <ul class="flavor-list">
                        ${p.flavors.map(f => `
                            <li class="${f.stock ? '' : 'out-of-stock'}" 
                                onclick="pick('${p.name}', '${f.name}', '${p.price}', this, ${f.stock})">
                                <span>${f.name}</span>
                                <span style="opacity:0.3;">${f.stock ? '+' : '‚úï'}</span>
                            </li>
                        `).join('')}
                    </ul>
                ` : `<div class="no-flavors">‚ö†Ô∏è –í–∫—É—Å—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</div>`}
            </div>
        `).join('');

        gsap.to(".catalog-item", {
            opacity: 1, y: 0, duration: 1, stagger: 0.1, ease: "power3.out",
            scrollTrigger: { trigger: "#catalog-container", start: "top 90%" }
        });

        gsap.to(".promo-badge", {
            scale: 1.08,
            boxShadow: "0 15px 35px rgba(255, 0, 212, 0.7)",
            duration: 0.8,
            repeat: -1,
            yoyo: true,
            ease: "sine.inOut"
        });
    }

    function pick(pName, fName, priceStr, el, stock) {
        if (!stock) return; // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—ã–±–æ—Ä–∞, –µ—Å–ª–∏ stock: false
        
        gsap.to("#hintBox", { opacity: 0, y: -200, duration: 0.5 });

        const id = `${pName} (${fName})`;
        const price = parseInt(priceStr.replace(/\s/g, ''));
        const idx = cart.findIndex(c => c.id === id);

        if (idx === -1) {
            cart.push({id, price});
            el.classList.add('selected');
            gsap.fromTo(el, {scale: 0.97}, {scale: 1.02, duration: 0.3, ease: "back.out(3)", yoyo: true, repeat: 1});
        } else {
            cart.splice(idx, 1);
            el.classList.remove('selected');
        }
        updateUI();
    }

    function updateUI() {
        const btn = document.getElementById('orderBtn');
        const priceDisplay = document.getElementById('totalPrice');
        const total = cart.reduce((s, i) => s + i.price, 0);

        if (cart.length > 0) {
            document.getElementById('btnLabel').innerText = `–ó–ê–ö–ê–ó–ê–¢–¨ (${cart.length})`;
            let curr = { v: parseInt(priceDisplay.innerText) || 0 };
            gsap.to(curr, {
                v: total, duration: 0.5, onUpdate: () => {
                    priceDisplay.innerText = Math.floor(curr.v).toLocaleString() + ' —Ç–≥';
                }
            });
            gsap.to(btn, { y: 0, opacity: 1, duration: 0.6, ease: "back.out(1.5)" });
            btn.href = "https://t.me/smokemanagerQST?text=" + encodeURIComponent("‚ùÑÔ∏è –ó–ê–ö–ê–ó:\n" + cart.map(i => "‚Äî " + i.id).join("\n") + "\n\nüí∞ –ò–¢–û–ì–û: " + total + " —Ç–≥");
        } else {
            gsap.to(btn, { y: 150, opacity: 0, duration: 0.4 });
        }
    }

    function createSnow() {
        const container = document.getElementById('snow-container');
        const s = document.createElement('div');
        s.className = 'snowflake';
        s.innerHTML = '‚ùÑ';
        s.style.left = Math.random() * 100 + '%';
        container.appendChild(s);
        gsap.to(s, { y: window.innerHeight + 50, x: "+=" + (Math.random() * 60 - 30), rotation: 360, duration: Math.random() * 5 + 5, ease: "none", onComplete: () => s.remove() });
    }
    setInterval(createSnow, 400);

    init();
</script>
</body>
</html>
